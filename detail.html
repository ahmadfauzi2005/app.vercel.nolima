<!-- detail.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product Detail</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<!-- detail.html -->
<body>
    <div id="product-detail"></div>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
        const supabase = createClient('https://kpspglomfamxnhhopecp.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtwc3BnbG9tZmFteG5oaG9wZWNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNjgyMDgsImV4cCI6MjA2ODk0NDIwOH0.3gwysVcLzH8iV1i_IY6PhbkDHU5Mf_Tp-T-Dq26ZHAE');

        const params = new URLSearchParams(window.location.search);
        const slug = params.get('slug');

        async function loadDetail() {
            const { data, error } = await supabase
                .from('products')
                .select('*')
                .eq('barcode', slug)
                .single();

            if (data) {
                document.getElementById('product-detail').innerHTML = `
                    <h1>${data.name}</h1>
                    <img src="${data.image_url}" width="200"/>
                    <p>Harga: Rp${data.price.toLocaleString('id-ID')}</p>
                `;
            } else {
                document.getElementById('product-detail').innerText = 'Product not found';
            }
        }

        loadDetail();
    </script>
</body>

</html>
